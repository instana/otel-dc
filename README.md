# ODCD (OTel based Data Collector for Databases)

**[Semantic Convention](docs/semconv)** |
**[Support](docs/support/README.md)** |
**[Changelog](CHANGELOG.md)** |
**[Contributing](CONTRIBUTING.md)** |
**[License](LICENSE)**

---
ODCD (OTel based Data Collector for database) is the tool or template to generate OpenTelemetry metrics for various
databases. All implementation are based on predefined OpenTelemetry Semantic Conventions. 

## Requirements

- Java 8+

## Build & Installation

1) Make sure Java SDK 8+ is installed.
```bash
java -version
```

2) Get the source code from `github.com`.
```bash
git clone https://github.com/instana/otel-database-dc.git
cd otel-database-dc
```

3) Build with Gradle
```bash
./gradlew clean build
```
*Note: gradle 7.4 will be installed if you do not have it.*

## Run ODCD

1) Make sure code is built with Java SDK 8+.

2) Refine configuration file (config/config.yaml) according to your own database. Right now we provide Data Collector for following databases:
  - DaMeng database
  
  >*Note: We respect the OTel community conventions and consider more about popular database engines for conventionss. While we may create 
  > implementations from those databases without OTel support based on user requirements or developer contributions. *

3) Start up your OTLP backend which accept OTLP connections. Right now we support following protocols:
- otlp/grpc

4) Option-1: Run the Data Collector with gradle
```bash
./gradlew run
```
5) Option-2: Find the deployment package (odcd-1.0-SNAPSHOT.tar) generated by gradle in the "build/distributions/" directory, extract deployment files:
```bash
tar vxf odcd-1.0-SNAPSHOT.tar
cd odcd-1.0-SNAPSHOT
```

Then, user can create the proper configuration files:
  - config/config.yaml
  - config/logging.properties

Run the Data Collector with following command according to your current OS:
  - bin/odcd

## Create a new data collector

Please refer to "[How to create a new data collector](docs/developer/new-db.md)".