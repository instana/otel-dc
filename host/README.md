# ODCD (OpenTelemetry based Data Collector for Telemetry Data)

**[Semantic Convention](../docs/semconv)** |
**[Support](../docs/support/README.md)** |
**[Changelog](../CHANGELOG.md)** |
**[Contributing](../CONTRIBUTING.md)** |
**[License](../LICENSE)**

---
ODCD (OpenTelemetry based Data Collector for Telemetry Data) is a collection of stanalone OpenTelemetry receivers for databases, systems, and apps. All implementations are based on predefined OpenTelemetry Semantic Conventions. A standard OTLP exporter is provided to forward the data from this "Data Collector" to a Telemetry backend or an OpenTelemetry Collector.

<br><br>

# Data Collector for Hosts


## Requirements

- Java 8+

## Build & Installation

1) Make sure Java SDK 8+ is installed.
```bash
java -version
```

2) Get the source code from `github.com`.
```bash
git clone https://github.com/instana/otel-dc.git
cd otel-dc/host
```

3) Build with Gradle
```bash
./gradlew clean build
```
*Note: gradle 7.4 will be installed if you do not have it.*

## Run

1) Make sure code is built with Java SDK 8+.

2) Refine configuration file (config/config.yaml) according to your host. Right now we provide Data Collector for following hosts:
  - Linux Host
  - IBM MQ appliance

*Note:* The default configuration file config/config.yaml is for linux host. If you want to monitor an IBM MQ appliance, you can copy config/config-mqappliance.yaml to config/config.yaml, or you can also use environment variable "DC_CONFIG" to specify the configuration file, for example:

```bash
export DC_CONFIG=config/config-mqappliance.yaml
```
3) Start up your OTLP backend which accept OTLP connections. Right now we support following protocols:
- otlp/grpc
- otlp/http

4) Option-1: Run the Data Collector with gradle
```bash
./gradlew run
```
*Note:* If you want to monitor IBM MQ appliance, you need to install **expect** before starting the Data Collector. You can run the command `which expect` to check if **expect** is already installed.

5) Option-2: Find the deployment package (otel-dc-host-*.tar) generated by gradle in the "build/distributions/" directory, extract deployment files:
```bash
cd build/distributions/
tar vxf otel-dc-host-*.tar
rm -f *.tar *.zip
cd otel-dc-host-*
```

Then, make sure following configuration files are correct for your environment:
  - config/config.yaml
  - config/logging.properties

*Note:* The default configuration file config/config.yaml is for linux host. If you want to monitor an IBM MQ appliance, you can copy config/config-mqappliance.yaml to config/config.yaml, or you can also use environment variable "DC_CONFIG" to specify the configuration file, for example:
```bash
export DC_CONFIG=config/config-mqappliance.yaml
```
Run the Data Collector with following command according to your current OS:
```bash
bin/otel-dc-host
```
*Note:* If you want to monitor IBM MQ appliance, you need to install **expect** before starting the Data Collector. You can run the command `which expect` to check if **expect** is already installed.

## Create Data Collector implementation for a new type of host

Please refer to "[How to create data collector implementation for a new database](docs/developer/new-db.md)".